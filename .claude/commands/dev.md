---
description: "전체 개발 파이프라인 실행: 계획 → 구현 → 품질 검증 → 브라우저 테스트. 4개 에이전트를 순차적으로 활용합니다."
allowed-tools: Bash, Read, Write, Edit, Glob, Grep, Task, TaskCreate, TaskUpdate, TaskList, TaskGet
---

# /dev — Full Development Pipeline

사용자의 요청을 4단계 에이전트 파이프라인으로 처리합니다.

## 사용자 요청

$ARGUMENTS

## 실행 워크플로우

아래 3단계를 순차적으로 실행하세요. 각 단계의 결과를 다음 단계의 입력으로 활용합니다.

### Phase 1: 계획 수립 (plan-architect)

Task tool로 `plan-architect` 에이전트를 실행합니다.

**프롬프트**: 사용자의 요청을 분석하고, 현재 코드베이스를 탐색한 뒤, 구체적인 구현 계획을 수립해주세요. 요구사항 정리, 구현 단계, 리스크, 완료 기준을 포함해주세요.

- 에이전트가 반환한 계획을 사용자에게 보여줍니다.
- 사용자에게 계획을 확인받습니다. (AskUserQuestion 사용)
  - "이 계획대로 진행할까요?"
  - 옵션: "진행" / "수정 필요"
- 사용자가 "수정 필요"를 선택하면 피드백을 반영하여 plan-architect를 다시 실행합니다.

### Phase 2: 구현 (senior-developer)

사용자가 계획을 승인하면, Task tool로 `senior-developer` 에이전트를 실행합니다.

**프롬프트**: Phase 1에서 수립된 계획을 기반으로 코드를 구현해주세요. 계획의 각 단계를 순서대로 실행하고, 기존 코드베이스의 패턴과 컨벤션을 따라주세요.

- 계획 내용 전체를 프롬프트에 포함시킵니다.
- 구현 결과를 사용자에게 요약하여 보여줍니다.

### Phase 3: 품질 검증 (code-quality-guard)

구현이 완료되면, Task tool로 `code-quality-guard` 에이전트를 실행합니다.

**프롬프트**: 방금 변경된 코드의 품질을 검증해주세요. lint와 build를 실행하고, 문제가 있으면 수정해주세요.

- 품질 검증 결과를 사용자에게 보여줍니다.
- 문제가 발견되어 코드가 수정된 경우, 수정 내용을 요약합니다.

### Phase 4: 브라우저 동작 테스트 (browser-test)

품질 검증이 완료되면, Task tool로 `general-purpose` 에이전트를 실행합니다.

**프롬프트**: 변경된 코드가 브라우저에서 정상 동작하는지 테스트해주세요. 아래 절차를 따릅니다:

1. **dev 서버 시작**: `npm run dev`를 백그라운드로 실행하고 서버가 준비될 때까지 대기합니다.
2. **페이지 접근 테스트**: 변경된 기능과 관련된 페이지들에 `curl` 또는 `fetch`로 요청을 보내 HTTP 200 응답을 확인합니다.
3. **HTML 구조 검증**: 응답 HTML에 주요 요소(헤더, 메인 콘텐츠, 폼 등)가 포함되어 있는지 확인합니다.
4. **API 엔드포인트 테스트**: 변경된 API 라우트가 있다면 요청을 보내 정상 응답(200/JSON 형식)을 확인합니다.
5. **콘솔 에러 확인**: 서버 로그에 에러가 없는지 확인합니다.
6. **dev 서버 종료**: 테스트 완료 후 서버 프로세스를 종료합니다.

- 테스트 결과를 사용자에게 보여줍니다.
- 실패한 항목이 있으면 원인을 분석하고 수정 방안을 제시합니다.

## 최종 출력

4단계가 모두 완료되면 아래 형식으로 최종 요약을 출력합니다:

```
## /dev 파이프라인 완료

### 계획 (plan-architect)
- [계획 요약 2-3줄]

### 구현 (senior-developer)
- [변경된 파일 목록]
- [주요 변경 사항 요약]

### 품질 검증 (code-quality-guard)
- Lint: PASS/FAIL
- Build: PASS/FAIL
- [수정된 이슈 요약]

### 브라우저 테스트 (browser-test)
- 페이지 응답: PASS/FAIL
- API 엔드포인트: PASS/FAIL (해당 시)
- 서버 에러: 없음/있음
- [발견된 이슈 요약]
```

## 주의사항

- 각 에이전트에게 이전 단계의 결과를 충분히 전달하세요.
- Phase 2에서는 반드시 Phase 1의 구체적인 구현 단계를 포함시키세요.
- 에이전트 간 컨텍스트가 끊기지 않도록 핵심 정보를 프롬프트에 명시하세요.
- 사용자 요청이 비어있으면 ($ARGUMENTS가 빈 경우) AskUserQuestion으로 무엇을 개발할지 물어보세요.
- Phase 4에서 dev 서버는 반드시 백그라운드로 실행하고, 테스트 종료 후 반드시 프로세스를 kill 해주세요.
- 변경 사항이 UI에 영향을 주지 않는 경우(예: 내부 리팩토링) Phase 4는 스킵할 수 있습니다.
